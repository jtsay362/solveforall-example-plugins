"use strict";function calcEps(){var t,i,s;t=1;do s=t,t/=2,i=1+t;while(i>1);return s}function calc(){this.eqcache={},this.angles="radians",this.loopcounter=0,this.eps=calcEps(),this.convAngles=function(t){return"degrees"===this.angles?t*(Math.PI/180):"gradians"===this.angles?t*(Math.PI/200):t},this.convRadians=function(t){return"degrees"===this.angles?180*t/Math.PI:"gradians"===this.angles?200*t/Math.PI:t};var t={};_(["sin","cos","tan","sec","cot","csc"]).each(function(i){var s=math[i];t[i]=function(t){return s(Calc.convAngles(t))}}),_(["asin","acos","atan","atan2"]).each(function(i){var s=math[i];t[i]=function(t){return Calc.convertRadians(s(t))}}),math["import"](t,{override:!0}),this.getVertex=function(t,i,s,r){if(this.loopcounter++,Math.abs(s-i)<=r)return this.loopcounter=0,(s+i)/2;if(this.loopcounter>200)return this.loopcounter=0,!1;var o=(s-i)/40,e=i-o,a=t(e),h=a;for(e=i;e<=s;e+=o){e=this.roundFloat(e);var n=t(e);if(h>a&&n<h||h<a&&n>h)return this.getVertex(t,e-2*o,e,r);h=n}return this.loopcounter=0,!1},this.getRoot=function(t,i,s,r){var o=math.parse(t),e=this.variablesInExpression(o);if(dump(t+", guess: "+i),i>-.1&&i<.1&&r!==!0){var a=t;if(e.length>0){var h=e[0];a=a.replace(new RegExp("\\b"+h+"\\b","g"),"("+h+"+5)")}dump("Replaced equation = "+a);var n=this.getRoot(a,i-5,s,!0);return dump(n),n!==!1&&n+5}s||(s=5);for(var c=i,l=i,u=0,d=o.compile(math),g=function(t){var i={};return _(e).each(function(s){i[s]=t}),d.eval(i)};l>c-s&&l<c+s&&u<100;){var x=l,n=g(x);if(n>-this.eps&&n<this.eps)return l;var p=this.getDerivative(g,x);if(!isFinite(p))break;l-=n/p,u++}return u>=100?(dump("Convergence failed, best root = "+l),l):(dump("false: center at "+c+" but guess at "+l),!1)},this.getIntersection=function(t,i,s,r){return this.getRoot("("+t+") - ("+i+")",s,r)},this.getDerivative=function(t,i){var s,r=0,o=i;s=o>1||o<-1?Math.sqrt(this.eps)*o:Math.sqrt(this.eps);for(var e=t(o),a=1;a<=50;a++){var h=s*a,n=1/h;i=o+h;var c=t(i);r+=(c-e)*n,i=o-h,c=t(i),r+=(e-c)*n}return r/100},this.variablesInExpression=function(t){var i={};return t.traverse(function(t){"SymbolNode"===t.type&&void 0===math[t.name]&&(i[t.name]=!0)}),Object.keys(i).sort()},this.makeFunction=function(t){var i=math.parse(t),s=i.compile(math),r=Calc.variablesInExpression(i);return function(t){var i={};return _(r).each(function(s){i[s]=t}),s.eval(i)}},this.roundToSignificantFigures=function(t,i){return 0===t?0:(d=Math.ceil(math.log10(t<0?-t:t)),power=i-d,magnitude=Math.pow(10,power),shifted=Math.round(t*magnitude),shifted/magnitude)},this.roundFloat=function(t){return Math.round(1e11*t)/1e11}}function dump(t){console.log(t)}function float_fix(t){return Math.round(1e7*t)/1e7}function widthPlusPadding(t){return $(t).width()+parseFloat($(t).css("paddingRight"))+parseFloat($(t).css("paddingLeft"))}function JSgCalc(t){this.graph=document.getElementById(t),this.graphElement=$("#"+t),this.width=$("#wrapper").width(),this.height=$("#wrapper").height(),this.maxgridlines={x:13,y:13},this.charHeight=8,this.startDrag={x:0,y:0},this.prevDrag={x:0,y:0},this.startCoord={x1:0,y1:0,x2:0,y2:0},this.currCoord={x1:-5,y1:-5,x2:5,y2:5},this.mousebutton=0,this.canvasX=this.graph.offsetLeft,this.canvasY=this.graph.offsetTop,this.calccache={},this.quality=1,this.zoomFactor=.1,this.lines=[],this.fillareapath=null,this.arbRound=function(t,i){return Math.round(t/i)*i},this.arbFloor=function(t,i){return Math.floor(t/i)*i},this.copyCoord=function(t){return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}},this.clearScreen=function(){this.ctx.fillStyle="rgb(255,255,255)",this.ctx.fillRect(0,0,this.width,this.height)},this.getEquation=function(t){return!!this.lines[t]&&this.lines[t].equation},this.getColor=function(t){return this.lines[t]?this.lines[t].color:"#000000"},this.drawEquation=function(t,i,s){if(!t)return!1;var r=this.currCoord.x1,o=(this.currCoord.x2,this.currCoord.y1),e=(this.currCoord.y2,this.getScale());this.calccache[t]||(this.calccache[t]={}),this.ctx.strokeStyle=i;var a=this.ctx.linewidth;s&&(this.ctx.linewidth=s),this.ctx.beginPath();var h=0,n=0;this.fillareapath=[],this.fillareapath.push([0,this.height- -o*e.y]);for(var c=1/this.quality,l=1/e.x,u=this.width+c,d=Calc.makeFunction(t),g=0;g<u;g+=c){var x=g*l+r,p=d(x),f=this.height-(p-o)*e.y;f>=this.height*-1&&f<=2*this.height?(h>1&&this.ctx.beginPath(),n!==!1&&(n>0&&p<0||n<0&&p>0)?this.ctx.moveTo(g,f):this.ctx.lineTo(g,f),h=0,n=!1):h<=1&&(this.ctx.lineTo(g,f),n=p,this.ctx.stroke(),h++),this.fillareapath.push([g,f])}this.fillareapath.push([u,this.height- -o*e.y]),this.ctx.stroke(),this.ctx.linewidth=a},this.drawFillArea=function(){if(!(this.fillareapath.length<1)){this.ctx.beginPath(),this.ctx.fillStyle="rgba(0, 0, 0, 0.1)";for(var t=0;t<this.fillareapath.length;t++)0===t?this.ctx.lineTo(this.fillareapath[t][0],this.fillareapath[t][1]):this.ctx.lineTo(this.fillareapath[t][0],this.fillareapath[t][1]);this.ctx.fill()}},this.drawLine=function(t,i,s,r,o,e){o||(o="#000000"),this.ctx.strokeStyle=o,this.ctx.beginPath();var a=this.getCoord(t,i),h=this.getCoord(s,r);this.ctx.moveTo(a.x,a.y),this.ctx.lineTo(h.x,h.y);var n=this.ctx.lineWidth;e&&(this.ctx.lineWidth=e),this.ctx.stroke(),this.ctx.lineWidth=n},this.drawLabel=function(t,i,s,r){r||(r="#000000");var o=this.getCoord(t,i),e=o.x,a=o.y;this.ctx.font="12pt 'open sans'",this.ctx.fillStyle=r,this.ctx.beginPath(),this.ctx.moveTo(e,a),a-4<this.charHeight&&(a+=2*this.charHeight);var h=this.ctx.measureText(s).width;e-4<h&&(e+=h+3),this.ctx.fillText(s,e-3,a-3)},this.drawDot=function(t,i,s,r){r||(r=4),s||(s="#000000");var o=this.getCoord(t,i);this.ctx.beginPath(),this.ctx.fillStyle=s,this.ctx.arc(o.x,o.y,r,0,2*Math.PI,!1),this.ctx.fill()},this.drawVertex=function(t,i,s){for(var r=Calc.makeFunction(t),o=this.getScale(),e=s/o.x+this.currCoord.x1,a=20/o.x,h=Calc.getVertex(r,e-a,e+a,1e-7),n=0;h===!1;){if(n++,n>5)return!1;h=Calc.getVertex(r,e-a-Math.random()/100,e+a+Math.random()/100,1e-7)}var c=Calc.roundFloat(h),l=r(c),l=Calc.roundFloat(this.arbRound(l,1e-7));this.drawDot(c,l,i,4),this.drawLabel(c,l,Calc.roundFloat(this.arbRound(c,1e-7))+", "+l,"#000000")},this.drawRoot=function(t,i,s){var r=this.getScale(),o=s/r.x+this.currCoord.x1,e=Calc.getRoot(t,o,50/r.x);if(e===!1)return!1;e=Math.round(1e7*e)/1e7;var a=Calc.roundFloat(e),h=0;this.drawDot(a,h,i,4),this.drawLabel(a,h,Calc.roundFloat(this.arbRound(a,1e-8))+", "+h)},this.drawIntersect=function(t,s,r){var o,e=this.getScale(),a=r/e.x+this.currCoord.x1,h=!1;for(i in this.lines)if(this.getEquation(i)!=t){var n=Calc.getIntersection(t,this.getEquation(i),a,50/e.x);n!==!1&&(n=Math.round(1e7*n)/1e7,dump(n),n!==!1&&(h===!1||Math.abs(a-h)>Math.abs(a-n))&&(h=n,o=t))}if(h===!1)return!1;var c=Calc.roundFloat(h),l=Calc.makeFunction(o),u=l(c);this.drawDot(c,u,s,4),this.drawLabel(c,u,float_fix(c)+", "+float_fix(u),s)},this.drawDerivative=function(t,i,s){var r=Calc.makeFunction(t),o=this.getScale(),e=Calc.roundFloat(this.arbRound(s/o.x+this.currCoord.x1,this.xgridscale/100)),a=Math.round(1e6*Calc.getDerivative(r,e))/1e6,h=e,n=r(h);n=Calc.roundFloat(this.arbRound(n,1e-7));var c=this.getCoord(h,n);this.ctx.beginPath(),this.ctx.fillStyle=i,this.ctx.arc(c.x,c.y,4,0,2*Math.PI,!1),this.ctx.fill();var l=2*this.xgridscale/Math.sqrt(Math.pow(a,2)+1),u=l*a,d={x:h-l,y:n-u},g={x:h+l,y:n+u};this.ctx.beginPath(),this.ctx.strokeStyle="#000000",d=this.getCoord(d.x,d.y),g=this.getCoord(g.x,g.y),this.ctx.moveTo(d.x,d.y),this.ctx.lineTo(g.x,g.y),this.ctx.stroke(),this.ctx.font="10pt 'open sans'",this.ctx.fillStyle="#000000";var x="x="+h+", d/dx="+a;h-=this.xgridscale/5;var p=r(h);h+=this.xgridscale/10;var f=r(s);(c.y-4<this.charHeight||p>f)&&(c.y+=this.charHeight+3);var v=this.ctx.measureText(x).width;c.x-4<v&&(c.x+=v+3),this.ctx.fillText(x,c.x-4,c.y-4)},this.drawTrace=function(t,i,s){var r=Calc.makeFunction(t),s=(this.getScale(),float_fix(this.arbRound(s,this.xgridscale/100))),o=r(s);o=float_fix(o);var e=(this.getCoord(s,o).x,this.getCoord(s,o).y);this.ctx.strokeStyle=i,e<=this.height&&e>=0&&(this.drawLine(s,o,s,0,"#999"),this.drawLine(s,o,0,o,"#999"),this.drawLabel(s,o,s+", "+o,"#000000")),this.drawDot(s,o,i,4),$("input.jsgcalc_trace_input").val(s),$("input.jsgcalc_trace_output").val(o)},this.drawGrid=function(){this.clearScreen();var t=this.currCoord.x1,s=this.currCoord.x2,r=this.currCoord.y1,o=this.currCoord.y2,e=s-t,a=o-r;Math.max(e/this.width,1e-20),Math.max(a/this.height,1e-20);for(i=1e-12,c=0;e/i>this.maxgridlines.x-1&&(c%3==1?i*=2.5:i*=2,!(c>1e4));c++);for(this.xgridscale=i,i=1e-12,c=0;a/i>this.maxgridlines.y-1&&(c%3==1?i*=2.5:i*=2,!(c>1e4));c++);this.ygridscale=i,this.ctx.font="10pt 'open sans'",this.ctx.textAlign="center";var h=yaxis=null,n=this.arbFloor(t,this.xgridscale),l=this.arbFloor(r,this.ygridscale),u=1.5*this.charHeight,d=-1;n=float_fix(n),l=float_fix(l),o>=0&&r<=0?u=this.height-(0-r)/(o-r)*this.height+1.5*this.charHeight:r>0&&(u=this.height-5),u>this.height-this.charHeight/2&&(u=this.height-5),s>=0&&t<=0?d=(0-t)/(s-t)*this.width-2:s<0&&(d=this.width-6),d<this.ctx.measureText(l).width+1&&(d=-1);var g=String(n).length+3;for(i=0;i<this.maxgridlines.x;i++)if(xpos=(n-t)/(s-t)*this.width,xpos-.5>this.width+1||xpos<0)n+=this.xgridscale;else{if(n=float_fix(n),0==n&&(h=xpos),("normal"==jsgui.gridlines||"less"==jsgui.gridlines&&Calc.roundFloat(n)%Calc.roundFloat(2*this.xgridscale)==0)&&(this.ctx.fillStyle="rgb(190,190,190)",this.ctx.fillRect(xpos-.5,0,1,this.height)),this.ctx.fillStyle="rgb(0,0,0)",0!=n){var x=this.ctx.measureText(n).width;xpos+.5*x>this.width?xpos=this.width-.5*x+1:xpos-.5*x<0&&(xpos=.5*x+1),this.ctx.fillText(n,xpos,u)}n+=this.xgridscale}for(this.ctx.textAlign="right",g=String(l).length+3,i=0;i<this.maxgridlines.y;i++)if(ypos=this.height-(l-r)/(o-r)*this.height,ypos-.5>this.height+1||ypos<0)l+=this.ygridscale;else{if(l=float_fix(l),0==l&&(yaxis=ypos),("normal"==jsgui.gridlines||"less"==jsgui.gridlines&&Calc.roundFloat(l)%Calc.roundFloat(2*this.ygridscale)==0)&&(this.ctx.fillStyle="rgb(190,190,190)",this.ctx.fillRect(0,ypos-.5,this.width,1)),this.ctx.fillStyle="rgb(0,0,0)",0!=l){var p=this.ctx.measureText(l).width;ypos+this.charHeight/2>this.height&&(ypos=this.height-this.charHeight/2-1),ypos-4<0&&(ypos=4);var f=d;d==-1&&(f=p+1),this.ctx.fillText(l,f,ypos+3)}l+=this.ygridscale}h&&this.ctx.fillRect(h-.5,0,1,this.height),yaxis&&this.ctx.fillRect(0,yaxis-.5,this.width,1)},this.getCoord=function(t,i){var s=(t-this.currCoord.x1)/(this.currCoord.x2-this.currCoord.x1)*this.width,r=this.height-(i-this.currCoord.y1)/(this.currCoord.y2-this.currCoord.y1)*this.height;return{x:s,y:r}},this.getValue=function(t,i){var s=this.getScale(),r=t/s.x+this.currCoord.x1,o=(this.height-i)/s.y+this.currCoord.y1;return{x:r,y:o}},this.doZoomBox=function(t,i,s,r){if(t==s||i==r)return void dump("Invalid doZoomBox");var o=this.getValue(t,i),e=this.getValue(s,r);t>s?(this.currCoord.x1=e.x,this.currCoord.x2=o.x):(this.currCoord.x1=o.x,this.currCoord.x2=e.x),r>i?(this.currCoord.y1=e.y,this.currCoord.y2=o.y):(this.currCoord.y1=o.y,this.currCoord.y2=e.y),this.startCoord=this.copyCoord(this.currCoord),this.draw()},this.draw=function(){this.drawGrid();for(var t in this.lines){var i=this.lines[t].equation;this.drawEquation(i,this.lines[t].color,3)}jsgui.updateValues()},this.getScale=function(){return{x:this.width/(this.startCoord.x2-this.startCoord.x1),y:this.height/(this.startCoord.y2-this.startCoord.y1)}},this.getRange=function(){return{x:Math.abs(this.startCoord.x2-this.startCoord.x1),y:Math.abs(this.startCoord.y2-this.startCoord.y1)}};this.checkMove=function(t,i){if(t!=this.prevDrag.x||i!=this.prevDrag.y){var s=this.getScale();1===this.mousebutton?"zoombox"===jsgui.currtool||"zoombox_active"===jsgui.currtool?(this.draw(),this.ctx.strokeStyle="rgb(150,150,150)",this.ctx.strokeRect(this.startDrag.x,this.startDrag.y,t-this.startDrag.x,i-this.startDrag.y)):(this.currCoord.x1=this.startCoord.x1-(t-this.startDrag.x)/s.x,this.currCoord.x2=this.startCoord.x2-(t-this.startDrag.x)/s.x,this.currCoord.y1=this.startCoord.y1+(i-this.startDrag.y)/s.y,this.currCoord.y2=this.startCoord.y2+(i-this.startDrag.y)/s.y,this.draw()):"trace"===jsgui.currtool?(this.draw(),this.drawTrace(this.getEquation(jsgui.currEq),this.getColor(jsgui.currEq),t/s.x+this.currCoord.x1)):"vertex"===jsgui.currtool?(this.draw(),this.drawVertex(this.getEquation(jsgui.currEq),this.getColor(jsgui.currEq),t)):"root"===jsgui.currtool?(this.draw(),this.drawRoot(this.getEquation(jsgui.currEq),this.getColor(jsgui.currEq),t)):"intersect"===jsgui.currtool?(this.draw(),this.drawIntersect(this.getEquation(jsgui.currEq),this.getColor(jsgui.currEq),t)):"derivative"===jsgui.currtool&&(this.draw(),this.drawDerivative(this.getEquation(jsgui.currEq),this.getColor(jsgui.currEq),t)),this.prevDrag={x:t,y:i}}},this.mouseDown=function(t){document.body.style.cursor="hand",0===this.mousebutton&&("zoombox"===jsgui.currtool&&(jsgui.currtool="zoombox_active"),this.startDrag.x=t.pageX-this.canvasX,this.startDrag.y=t.pageY-this.canvasY,this.startCoord=this.copyCoord(this.currCoord)),this.mousebutton=1},this.mouseUp=function(t){"zoombox_active"===jsgui.currtool&&(this.doZoomBox(this.startDrag.x,this.startDrag.y,t.pageX-this.canvasX,t.pageY-this.canvasY),jsgui.setTool("pointer")),"zoomin"===jsgui.currtool&&Math.abs(t.pageX-this.canvasX-this.startDrag.x)+Math.abs(t.pageY-this.canvasY-this.startDrag.y)<5&&this.zoom(.1,t),"zoomout"===jsgui.currtool&&Math.abs(t.pageX-this.canvasX-this.startDrag.x)+Math.abs(t.pageY-this.canvasY-this.startDrag.y)<5&&this.zoom(-.1,t),this.mousebutton=0,this.startCoord=this.copyCoord(this.currCoord)},this.mouseWheel=function(t,i){i>0?this.zoom(this.zoomFactor,t):this.zoom(-this.zoomFactor,t)},this.setWindow=function(t,i,s,r){this.currCoord.x1=t,this.currCoord.x2=i,this.currCoord.y1=s,this.currCoord.y2=r,this.startCoord=this.copyCoord(this.currCoord),this.draw()},this.zoom=function(t,i){var s=this.getRange();if(i){var r=i.pageX-this.canvasX,o=i.pageY-this.canvasY,e=1-o/this.height,a=r/this.width;this.currCoord.x1+=s.x*t*a,this.currCoord.y1+=s.y*t*e,this.currCoord.x2-=s.x*t*(1-a),this.currCoord.y2-=s.y*t*(1-e)}else this.currCoord.x1+=s.x*t,this.currCoord.y1+=s.y*t,this.currCoord.x2-=s.x*t,this.currCoord.y2-=s.y*t;this.startCoord=this.copyCoord(this.currCoord),this.draw()},this.animate=function(){this.currCoord.x1+=.05,this.currCoord.y1+=.05,this.currCoord.x2+=.05,this.currCoord.y2+=.05,this.draw(),setTimeout("jsgcalc.animate()",50)},this.resizeGraph=function(t,i){var s=this.height,r=this.width;$("#graph").width(t),$("#graph").height(i),this.ctx.height=i,this.ctx.width=t,this.graph.height=i,this.graph.width=t,this.height=i,this.width=t,dump("Resized to "+t+"x"+i),this.currCoord.x1*=t/r,this.currCoord.x2*=t/r,this.currCoord.y1*=i/s,this.currCoord.y2*=i/s,this.startCoord=this.copyCoord(this.currCoord),this.maxgridlines.x=.04*t,this.maxgridlines.y=.04*i,this.draw()},this.resetZoom=function(){this.currCoord={x1:-5*(this.width/this.height),y1:-5,x2:5*(this.width/this.height),y2:5.1},this.startCoord=this.copyCoord(this.currCoord),this.draw()},this.initCanvas=function(){if(this.graph.getContext){this.ctx=this.graph.getContext("2d"),this.resize();var t=(this.width||1)/(this.height||1);this.currCoord={x1:-5*t,y1:-5,x2:5*t,y2:5},this.startCoord=this.copyCoord(this.currCoord),jsgui.evaluate();var i=this;$("#graph").mousemove(function(t){i.canvasX=i.graph.offsetLeft,i.canvasY=i.graph.offsetTop,i.checkMove(t.pageX-i.canvasX,t.pageY-i.canvasY)}).mousedown(function(t){i.mouseDown(t)}).mousewheel(function(t,s){return i.mouseWheel(t,s),!1}).mouseup(function(t){i.mouseUp(t)}),$(window).resize(function(){i.resize()})}else $("#graph_wrapper").text("Sorry, your browser is not supported.")},this.resize=function(){var t=Math.max($(window).width()||$("#graph_wrapper").width()||DEFAULT_WIDTH,50),i=Math.max(($(window).height()||$("#graph_wrapper").height()||DEFAULT_HEIGHT)-NON_GRAPH_HEIGHT,50);this.resizeGraph(t,i)}}function JSgui(){this.currInput=0,this.lineColors={"#FF0000":-1,"#0000FF":-1,"#00FF00":-1,"#FF00FF":-1,"#00FFFF":-1,"#000000":-1,"#990000":-1,"#000099":-1,"#009900":-1,"#999900":-1,"#990099":-1,"#009999":-1},this.lineSettings={0:{color:"#FF0000"}},this.currtool="trace",this.currEq=0,this.gridlines="normal",this.settings={},this.setQuality=function(t){$("#quality_select .option").removeClass("option_selected");var i=Math.round(10*t);$("#quality_select_"+i).addClass("option_selected"),jsgcalc.quality=t,jsgcalc.draw()},this.setAngles=function(t){$("#angle_select .option").removeClass("option_selected"),$("#angle_select_"+t).addClass("option_selected"),Calc.angles=t,jsgcalc.draw()},this.selectEquation=function(t){this.currEq=t,$("#graph_inputs div.graph_input_wrapper").removeClass("active_equation"),$("#graph_input_wrapper_"+t).addClass("active_equation"),jsgcalc.draw()},this.setTool=function(t){$("#tool_select a").removeClass("toolbar_selected");var i=$("#tool_select_"+t);i.addClass("toolbar_selected"),$(".toolbox").hide(),$("#toolbox_"+t).css({top:0,left:0}).show(),this.currtool=t,jsgcalc.draw()},this.setGridlines=function(t){$("#gridlines_select  .option").removeClass("option_selected"),$("#gridlines_select_"+t).addClass("option_selected"),this.gridlines=t,jsgcalc.draw()},this.updateInputData=function(){jsgcalc.lines=[],$("#graph_inputs div.graph_input_wrapper").each(function(){jsgcalc.lines.push({equation:$("input",this).val(),color:$(".graph_color_indicator",this).css("backgroundColor")})})},this.evaluate=function(){this.updateInputData(),jsgcalc.draw(),this.refreshInputs()},this.findAvailableColor=function(){for(var t in this.lineColors)if(this.lineColors[t]==-1)return t},this.updateValues=function(){$("input.jsgcalc_xmin").val(Math.round(1e3*jsgcalc.currCoord.x1)/1e3),$("input.jsgcalc_xmax").val(Math.round(1e3*jsgcalc.currCoord.x2)/1e3),$("input.jsgcalc_ymin").val(Math.round(1e3*jsgcalc.currCoord.y1)/1e3),$("input.jsgcalc_ymax").val(Math.round(1e3*jsgcalc.currCoord.y2)/1e3)},this.addInput=function(t){this.updateInputData();var i=this.findAvailableColor();this.lineColors[i]=this.currInput,jsgcalc.lines.push({equation:t||"",color:i}),this.currInput++,this.refreshInputs()},this.refreshInputs=function(){var t=jsgcalc.lines;$("#graph_inputs").html("");for(var i=0;i<t.length;i++)$("#graph_inputs").append('<div id="graph_input_wrapper_'+i+'" class="graph_input_wrapper"><div class="graph_color_indicator" id="graph_color_indicator_'+i+'"></div><div class="graph_equation_display"><span>y =</span><input id="graph_input_'+i+'" size="20" value="'+t[i].equation+'" placeholder="Enter a function of x"  spellcheck="false" autocorrect="off" autocapitalize="off" autocomplete="off"><button class="remove_equation_button btn btn-default" title="Clear the equation"><i class="fa fa-remove"></i></button></div></div>'),$("#graph_color_indicator_"+i).css("backgroundColor",t[i].color),this.lineColors[t[i].color]=i;$("#graph_inputs div.graph_input_wrapper").each(function(){$(this).bind("click",function(){var t=$(this).attr("id"),i=parseInt(t.replace("graph_input_wrapper_",""));jsgui.selectEquation(i)})}),this.currInput=t.length+1,$("#graph_input_wrapper_"+this.currEq).addClass("active_equation")}}!function(t){function i(i){var s=i||window.event,r=[].slice.call(arguments,1),o=0,e=0,a=0;return i=t.event.fix(s),i.type="mousewheel",s.wheelDelta&&(o=s.wheelDelta/120),s.detail&&(o=-s.detail/3),a=o,void 0!==s.axis&&s.axis===s.HORIZONTAL_AXIS&&(a=0,e=-1*o),void 0!==s.wheelDeltaY&&(a=s.wheelDeltaY/120),void 0!==s.wheelDeltaX&&(e=-1*s.wheelDeltaX/120),r.unshift(i,o,e,a),(t.event.dispatch||t.event.handle).apply(this,r)}var s=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var r=s.length;r;)t.event.fixHooks[s[--r]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=s.length;t;)this.addEventListener(s[--t],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var t=s.length;t;)this.removeEventListener(s[--t],i,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery);var Calc={};Calc=new calc;var DEFAULT_HEIGHT=600,DEFAULT_WIDTH=600,NON_GRAPH_HEIGHT=230;$(document).ready(function(){jsgcalc=new JSgCalc("graph"),jsgcalc.initCanvas()}),jsgui=new JSgui,$(document).ready(function(){var t;try{t=JSON.parse($("#data_container").attr("data-equations"))}catch(i){console.warn("Can't get equations",i)}t&&t.length>0?(_(t).each(function(t){jsgui.addInput(t)}),jsgui.evaluate()):jsgui.addInput(""),_(["trace","vertex","root","intersect","derivative","zoombox"]).each(function(t){$("#tool_select_"+t).click(function(i){jsgui.setTool(t)})}),$("#apply_zoom_button").click(function(t){jsgcalc.setWindow(parseFloat($("#toolbox_zoombox_xmin").val(),10),parseFloat($("#toolbox_zoombox_xmax").val(),10),parseFloat($("#toolbox_zoombox_ymin").val(),10),parseFloat($("#toolbox_zoombox_ymax").val(),10))}),$("#reset_zoom_button").click(function(t){jsgcalc.resetZoom()}),$(".close_button").click(function(){$(".toolbox").hide()}),$("#graph_inputs").on("change","input",function(){var t=$(this).val();t&&jsgui.evaluate()}),$("#graph_inputs").on("click",".remove_equation_button",function(){$(this).closest(".graph_input_wrapper").remove(),jsgui.updateInputData(),jsgui.evaluate()}),$("#add_input_button").click(function(t){jsgui.addInput()}),$("#settings_button").click(function(t){$("#settings").toggle(400)}),_(["degrees","radians","gradians"]).each(function(t){$("#angle_select_"+t).click(function(i){jsgui.setAngles(t)})}),_(["normal","less","off"]).each(function(t){$("#gridlines_select_"+t).click(function(i){jsgui.setGridlines(t)})}),_([1,5,10,50]).each(function(t){$("#quality_select_"+t).click(function(i){jsgui.setQuality(.1*t)})}),$("#disclaimer_link").click(function(t){t.preventDefault(),$("#disclaimer_modal").modal()}),document.body.onselectstart=function(){return!1}});