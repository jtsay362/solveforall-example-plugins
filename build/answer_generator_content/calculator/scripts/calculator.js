var Calculator=function(){"use strict";var i=$("#display").text().trim(),t=this;t.value=i||"0",t.sum=i||0,t.prevOperator=null,t.isShowing=!1,t.display=function(i){return $(".expression_holder").css("visibility","hidden"),i?(t.value=i,$("#display").text(""+i),i):t.value},t.isShowingResult=function(){return t.isShowing},t.setShowingResult=function(i){return t.isShowing=i},t.digit=function(i){if(t.isShowingResult()&&(t.clearDisplay(),t.setShowingResult(!1)),!("."===i&&t.display().indexOf(".")>-1)){var a=t.display(),l="0"===a?i:a+i;"."===l&&(l="0."),t.display(l)}},t.operator=function(i){if(!t.isShowingResult()){var a=parseFloat(t.display(),10);switch(t.prevOperator){case"plus":t.sum+=a;break;case"minus":t.sum-=a;break;case"multiply":t.sum*=a;break;case"divide":t.sum/=a;break;default:t.sum=a}}if(t.prevOperator){var l=t.sum.toPrecision(10);if(l.indexOf(".")>=0){for(var e=l.length;"0"===l.substr(e-1);)l=l.substr(0,e-1),e-=1;"."===l.substr(e-1)&&(l=l.substr(0,e-1),e-=1),0===e&&(l="0")}t.display(l)}t.prevOperator="="===i?null:i,t.setShowingResult(!0)},t.negate=function(){var i=t.display();if(!t.isShowingResult()&&"0"!==i){var a="-"===i.substr(0,1)?i.substr(1):"-"+i;t.display(a)}},t.backspace=function(i,a){if(!t.isShowingResult()){var l=t.display();l.length>1?t.display(l.substr(0,l.length-1)):t.clearDisplay()}},t.clear=function(){t.prevOperator=null,t.clearDisplay(),t.sum=0},t.clearDisplay=function(){t.display("0")}};$("#calculator").ready(function(){function i(i){return function(){t.digit(""+i)}}var t=new Calculator;$("#calculator-button-clear").click(function(){t.clear()}),$("#calculator-button-backspace").click(function(){t.backspace()}),$("#calculator-button-negate").click(function(){t.negate()}),$("#calculator-button-dot").click(function(){t.digit(".")});var a=["plus","minus","multiply","divide","equal"];$.each(a,function(i,a){$("#calculator-button-"+a).click(function(){t.operator(a)})});for(var l=0;l<10;l++)$("#calculator-button-"+l).click(i(l));var e={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"multiply",107:"plus",109:"minus",110:"dot",111:"divide",8:"backspace",13:"equal",46:"clear",67:"clear",27:"clear"};$(".body").keyup(function(i){if(i.which in e){var t=$("#calculator-button-"+e[i.which]);$(t).addClass("active"),setTimeout(function(){$(t).removeClass("active")},100),$(t).click()}})});