function CommandLineEditor(e){function t(){E.results.scrollTop=E.results.scrollHeight}function n(){var e,t=E.input.value,n=/[a-zA-Z_0-9]+$/.exec(t);if(n){var a=n[0],r=[];for(var i in C.scope)C.scope.hasOwnProperty(i)&&0==i.indexOf(a)&&r.push(i);0=="clear".indexOf(a)&&r.push("clear");var o=["expr","type"];for(var l in c)c.hasOwnProperty(l)&&0==l.indexOf(a)&&o.indexOf(l)==-1&&r.push(l);var p=c.type.Unit;for(e in p.UNITS)p.UNITS.hasOwnProperty(e)&&0==e.indexOf(a)&&r.push(e);for(e in p.PREFIXES)if(p.PREFIXES.hasOwnProperty(e)){var u=p.PREFIXES[e];for(var d in u)if(u.hasOwnProperty(d))if(0==d.indexOf(a))r.push(d);else if(0==a.indexOf(d)){var s=a.substring(d.length);for(var f in p.UNITS)p.UNITS.hasOwnProperty(f)&&0==f.indexOf(s)&&p.isValuelessUnit(d+f)&&r.push(d+f)}}var m=r[0];m&&(t=t.substring(0,t.length-a.length)+m,E.input.value=t)}}function a(e){E.frame.parentNode!=m&&o(),e=e||window.event;var t=e.target||e.srcElement,n=e.which||e.keyCode;if(83==n)"INPUT"!=t.nodeName.toUpperCase()&&(E.input.focus(),f.preventDefault(e),f.stopPropagation(e));else if(71==n&&"INPUT"!=t.nodeName.toUpperCase()){var a=document.getElementById("gsc-i-id1");a&&a.focus(),f.preventDefault(e),f.stopPropagation(e)}}function r(e){e=e||window.event;var t=e.which||e.keyCode;switch(t){case 9:return n(),f.preventDefault(e),f.stopPropagation(e),!1;case 13:return s(),f.preventDefault(e),f.stopPropagation(e),!1;case 38:return P>0&&(P--,E.input.value=g[P]||"",f.preventDefault(e),f.stopPropagation(e)),!1;case 40:return P<g.length&&(P++,E.input.value=g[P]||"",f.preventDefault(e),f.stopPropagation(e)),!1;default:P=g.length}return!0}function i(){E.frame=document.createElement("div"),E.frame.className="cle",m.appendChild(E.frame),E.topPanel=document.createElement("div"),E.topPanel.className="top-panel",E.frame.appendChild(E.topPanel),E.bottomPanel=document.createElement("div"),E.bottomPanel.className="bottom-panel",E.frame.appendChild(E.bottomPanel),E.results=document.createElement("div"),E.results.className="results",E.topPanel.appendChild(E.results),E.inputLeft=document.createElement("div"),E.inputLeft.className="input-left",E.bottomPanel.appendChild(E.inputLeft),E.inputRight=document.createElement("div"),E.inputRight.className="input-right",E.bottomPanel.appendChild(E.inputRight),E.input=document.createElement("input"),E.input.className="input",E.input.title="Enter an expression",E.input.setAttribute("autocomplete","off"),E.input.setAttribute("autocapitalize","off"),E.input.setAttribute("autocorrect","off"),E.input.setAttribute("spellcheck","false"),E.input.onkeydown=r,E.inputLeft.appendChild(E.input),E.btnEval=document.createElement("button"),E.btnEval.appendChild(document.createTextNode("Evaluate")),E.btnEval.className="btn btn-default eval",E.btnEval.title="Evaluate the expression (Enter)",E.btnEval.onclick=s,E.inputRight.appendChild(E.btnEval),f.addEventListener(window,"keydown",a)}function o(){E.frame.parentNode&&E.frame.parentNode.removeChild(E.frame),f.removeEventListener(window,"keydown",a)}function l(e){return e.replace(/^\s+|\s+$/g,"")}function p(){var e=document.getElementById("data_to_transfer").getAttribute("data-expr");d(e?e:"0")}function u(){g=[],P=-1,C.clear(),f.clearDOM(E.results),E.input.value=""}function d(e){if(e=l(e),"clear"==e)return void u();if(e){g.push(e),P=g.length;var n,a,r;try{n=C.eval("ans = ("+e+")"),a="ans = "+c.format(n,{precision:14}),r="floating-point result: "+c.format(n)}catch(i){a=i.toString(),r=""}var o=document.createElement("pre");o.className="expr",o.appendChild(document.createTextNode(e)),E.results.appendChild(o);var p=document.createElement("pre");p.className="res",p.appendChild(document.createTextNode(a)),p.title=r,E.results.appendChild(p),t(),E.input.value=""}}function s(){d(E.input.value)}var c=e.math||mathjs(),f={};f.getInternetExplorerVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e},f.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},f.removeEventListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},f.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},f.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},f.clearDOM=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};var m=e&&e.container?e.container:void 0;if(!m)throw new Error('Required parameter "container" missing in configuration parameters');e&&e.id?String(e.id):"default";f.clearDOM(m);var v;if("undefined"==typeof c||!c.parser)return v=document.createElement("div"),v.appendChild(document.createTextNode("Cannot create parser, math.js not loaded.")),v.style.color="red",void m.appendChild(v);var h=f.getInternetExplorerVersion();if(6==h||7==h)return v=document.createElement("div"),v.appendChild(document.createTextNode("Sorry, this demo is not available on IE7 and older. The math.js library itself works fine on every version of IE though.")),v.style.color="red",void m.appendChild(v);var E={},g=[],P=-1,C=c.parser();i(),p()}var container=document.getElementById("commandline");if(container)var editor=new CommandLineEditor({container:container,math:math});