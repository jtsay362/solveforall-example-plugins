"use strict";var Calculator=function(){var t=$("#display").text().trim(),i=this;i.value=t||"0",i.sum=t||0,i.prevOperator=null,i.isShowing=!1,i.display=function(t){return t?(i.value=t,$("#display").text(""+t),t):i.value},i.isShowingResult=function(){return i.isShowing},i.setShowingResult=function(t){return i.isShowing=t},i.digit=function(t){if(i.isShowingResult()&&(i.clearDisplay(),i.setShowingResult(!1)),!("."===t&&i.display().indexOf(".")>-1)){var a=i.display(),l="0"===a?t:a+t;"."===l&&(l="0."),i.display(l)}},i.operator=function(t){if(!i.isShowingResult()){var a=parseFloat(i.display(),10);switch(i.prevOperator){case"plus":i.sum+=a;break;case"minus":i.sum-=a;break;case"multiply":i.sum*=a;break;case"divide":i.sum/=a;break;default:i.sum=a}}if(i.prevOperator){var l=i.sum.toPrecision(10);if(l.indexOf(".")>=0){for(var u=l.length;"0"==l.substr(u-1);)l=l.substr(0,u-1),u-=1;"."==l.substr(u-1)&&(l=l.substr(0,u-1),u-=1),0==u&&(l="0")}i.display(l)}i.prevOperator="="===t?null:t,i.setShowingResult(!0)},i.negate=function(){var t=i.display();if(!i.isShowingResult()&&"0"!==t){var a="-"===t.substr(0,1)?t.substr(1):"-"+t;i.display(a)}},i.backspace=function(){if(!i.isShowingResult()){var t=i.display();t.length>1?i.display(t.substr(0,t.length-1)):i.clearDisplay()}},i.clear=function(){i.prevOperator=null,i.clearDisplay(),i.sum=0},i.clearDisplay=function(){i.display("0")}};$("#calculator").ready(function(){function t(t){return function(){i.digit(""+t)}}var i=new Calculator;$("#calculator-button-clear").click(function(){i.clear()}),$("#calculator-button-backspace").click(function(){i.backspace()}),$("#calculator-button-negate").click(function(){i.negate()}),$("#calculator-button-dot").click(function(){i.digit(".")});var a=["plus","minus","multiply","divide","equal"];$.each(a,function(t,a){$("#calculator-button-"+a).click(function(){i.operator(a)})});for(var l=0;10>l;l++)$("#calculator-button-"+l).click(t(l));var u={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"multiply",107:"plus",109:"minus",110:"dot",111:"divide",8:"backspace",13:"equal",46:"clear",67:"clear",27:"clear"};$(".body").keyup(function(t){if(t.which in u){var i=$("#calculator-button-"+u[t.which]);$(i).addClass("active"),setTimeout(function(){$(i).removeClass("active")},100),$(i).click()}})});